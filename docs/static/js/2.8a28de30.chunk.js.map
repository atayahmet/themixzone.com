{"version":3,"sources":["pages/series/DetailPage.tsx","hocs/series/DetailHoc.tsx"],"names":["SeriesDetail","_super","props","_this","call","this","state","currentSeries","__WEBPACK_IMPORTED_MODULE_0_tslib__","prototype","componentDidUpdate","prevProps","Object","__WEBPACK_IMPORTED_MODULE_11_lodash__","match","params","getData","componentDidMount","name","__WEBPACK_IMPORTED_MODULE_12__music_services_gaService__","pageView","render","__WEBPACK_IMPORTED_MODULE_1_react__","__WEBPACK_IMPORTED_MODULE_4__layouts_Sidebar__","__WEBPACK_IMPORTED_MODULE_5_semantic_ui_react__","style","height","className","as","mixes","__WEBPACK_IMPORTED_MODULE_10__music_components_MixBox__","data","slice","cb","series","find","__WEBPACK_IMPORTED_MODULE_8__music_models_mix__","getMixesBySeries","id","then","res","docs","map","__WEBPACK_IMPORTED_MODULE_9__music_utils__","setState","catch","console","error","SeriesDetailPage","__WEBPACK_IMPORTED_MODULE_3_react_router_dom__","__WEBPACK_IMPORTED_MODULE_2_react_redux__","__WEBPACK_IMPORTED_MODULE_7__music_extensions_entity_collection__","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_6__music_hocs_series_DetailHoc__","WrappedComponent","class_1","collections","isFetching"],"mappings":"yOAyBAA,EAAA,SAAAC,GAKE,SAAAD,EAAYE,GAAZ,IAAAC,EACEF,EAAAG,KAAAC,KAAMH,IAAMG,YALPF,EAAAG,OACLC,oBAyCJ,OA3C2BC,EAAA,EAAAR,EAAAC,GASlBD,EAAAS,UAAAC,mBAAP,SAA0BC,GAClBC,OAAAC,EAAA,QAAAD,CAAQP,KAAKH,MAAMY,MAAMC,OAAQJ,EAAUG,MAAMC,SACrDV,KAAKW,WAIFhB,EAAAS,UAAAQ,kBAAP,WACEZ,KAAKW,QAAQ,SAACE,GAAS,OAAAC,EAAA,EAAUC,SAAS,kBAAkBF,MAGvDlB,EAAAS,UAAAY,OAAP,WACE,OACEC,EAAA,cAAAA,EAAA,cACEA,EAAA,cAACC,EAAA,EAAgB,KACfD,EAAA,cAACE,EAAA,GAAQC,OAAQC,OAAQ,QAASC,UAAU,uBAC1CL,EAAA,cAACE,EAAA,GAAOI,GAAG,MAAMvB,KAAKC,MAAMC,cAAcW,MACzCb,KAAKC,MAAMuB,OACVP,EAAA,cAACQ,EAAA,GAAOC,KAAU1B,KAAKC,MAAMuB,MAAKG,cAQtChC,EAAAS,UAAAO,QAAR,SAAgBiB,GAAhB,IAAA9B,EAAAE,UAAgB,IAAA4B,MAAA,WAAmC,cACzC,IAAAf,EAAAb,KAAAH,MAAAY,MAAAC,OAAAG,KACFX,EAAgBF,KAAKH,MAAMgC,OAAOC,KAAKjB,EAAM,QAEnDkB,EAAA,EAAIC,iBAAiB9B,EAAc+B,IAAIC,KAAK,SAACC,GAC3C,IAAMX,EAAQW,EAAIC,KAAKC,IAAIC,EAAA,GAC3BxC,EAAKyC,UAAUf,MAAKA,EAAEtB,cAAaA,GAAG,WAAM,OAAA0B,EAAG1B,EAAcW,UAC5D2B,MAAMC,QAAQC,QAErB/C,EA3CA,CAA2BsB,EAAA,WA2DrB0B,EAAmBpC,OAAAqC,EAAA,EAAArC,CAAWA,OAAAsC,EAAA,EAAAtC,CANZ,SAACN,GACvB,OACE4B,OAAQ,IAAIiB,EAAA,EAAiB7C,EAAM4B,OAAOH,QAIVnB,CAAyBZ,IAE9CoD,EAAA,QAAAxC,OAAAyC,EAAA,GAAgBL,0CCpFhB,SAAyBM,GACtC,gBAAArD,GACE,SAAAsD,EAAYrD,GAAZ,IAAAC,EACEF,EAAAG,KAAAC,KAAMH,IAAMG,YACZF,EAAKG,OACHkD,eACAC,YAAY,KAalB,OAlBqBjD,EAAA,EAAA+C,EAAAtD,GASNsD,EAAA9C,UAAAQ,kBAAb,+FAIOsC,EAAA9C,UAAAY,OAAP,WACE,OACEC,EAAA,cAACgC,EAAgB,OAGvBC,EAlBA,CAAqBjC,EAAA","file":"static/js/2.8a28de30.chunk.js","sourcesContent":["import * as React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport SidebarComponent from '../../layouts/Sidebar';\nimport { Segment, Header } from 'semantic-ui-react';\nimport SeriesDetailHoc from '@music/hocs/series/DetailHoc';\nimport { IRouteProps, IState, ISeries, IMix } from '@music/interfaces';\nimport EntityCollection from '@music/extensions/entity-collection';\nimport mix from '@music/models/mix';\nimport { firestore } from 'firebase';\nimport { moveIdToDoc } from '@music/utils';\nimport MixBox from '@music/components/MixBox';\nimport { isEqual } from 'lodash';\nimport gaService from '@music/_services/gaService';\n\ninterface ISeriesState {\n  currentSeries: ISeries;\n  mixes?: IMix[];\n}\n\ninterface ISeriesDetailProps extends IRouteProps {\n  series: EntityCollection;\n}\n\n\nclass SeriesDetail extends React.Component<ISeriesDetailProps, any> {\n  public state: Readonly<ISeriesState> = {\n    currentSeries: {} as ISeries,\n  };\n\n  constructor(props: ISeriesDetailProps) {\n    super(props);\n  }\n\n  public componentDidUpdate(prevProps: ISeriesDetailProps) {\n    if (! isEqual(this.props.match.params, prevProps.match.params)) {\n      this.getData();\n    }\n  }\n\n  public componentDidMount() {\n    this.getData((name) => gaService.pageView(`Series Detail: ${name}`));\n  }\n\n  public render() {\n    return (\n      <>\n        <SidebarComponent>\n          <Segment style={{height: 'auto'}} className=\"toptracks-container\">\n            <Header as='h1'>{this.state.currentSeries.name}</Header>\n            {this.state.mixes &&\n              <MixBox data={[...this.state.mixes]} />\n            }\n          </Segment>\n        </SidebarComponent>\n      </>\n    );\n  }\n\n  private getData(cb: (title: string) => any = () => null) {\n    const { name } = this.props.match.params;\n    const currentSeries = this.props.series.find(name, 'slug') as ISeries;\n\n    mix.getMixesBySeries(currentSeries.id).then((res: firestore.QuerySnapshot) => {\n      const mixes = res.docs.map(moveIdToDoc);\n      this.setState({mixes, currentSeries}, () => cb(currentSeries.name));\n    }).catch(console.error);\n  }\n}\n\n// const mapDispatchToProps = (dispatch: CallableFunction) => {\n//   return {\n//     closeModal: (domain: string) => dispatch(closeModalAction(domain)),\n//     saveFormData: (data: IAdvertisementFormData) => dispatch(saveAdFormData(data)),\n//     setNextStep: (step: string) => dispatch(setNextStepAction(step)),\n//   }\n// };\n\nconst mapStateToProps = (state: IState) => {\n  return {\n    series: new EntityCollection(state.series.data),\n  }\n};\n\nconst SeriesDetailPage = withRouter(connect(mapStateToProps)(SeriesDetail) as any);\n\nexport default SeriesDetailHoc(SeriesDetailPage);\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/series/DetailPage.tsx","import * as React from 'react';\n\nexport default function SeriesDetailHoc(WrappedComponent: any) {\n  return class extends React.Component<any, any> {\n    constructor(props: any) {\n      super(props);\n      this.state = {\n        collections: {},\n        isFetching: true,\n      };\n    }\n\n    public async componentDidMount() {\n\n    }\n\n    public render() {\n      return (\n        <WrappedComponent />\n      );\n    }\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/hocs/series/DetailHoc.tsx"],"sourceRoot":""}