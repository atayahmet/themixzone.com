{"version":3,"sources":["pages/series/ListPage.tsx","hocs/series/ListHoc.tsx"],"names":["SeriesList","_super","props","_this","call","this","state","__WEBPACK_IMPORTED_MODULE_0_tslib__","prototype","componentDidMount","__WEBPACK_IMPORTED_MODULE_8__music_models__","all","then","res","setState","artists","docs","map","__WEBPACK_IMPORTED_MODULE_9__music_utils__","reduce","result","artist","id","__WEBPACK_IMPORTED_MODULE_15__music_services_gaService__","pageView","catch","console","error","render","__WEBPACK_IMPORTED_MODULE_1_react__","__WEBPACK_IMPORTED_MODULE_14_react_sizeme__","_a","size","__WEBPACK_IMPORTED_MODULE_4__layouts_Sidebar__","__WEBPACK_IMPORTED_MODULE_5_semantic_ui_react__","style","height","className","as","Group","series","s","fluid","width","centered","key","link","onClick","go","src","Object","__WEBPACK_IMPORTED_MODULE_7__music_config__","slug","Content","Header","name","Meta","artistId","Description","about","extra","play","count","history","push","newInstance","url","mix","__WEBPACK_IMPORTED_MODULE_11__filters__","container","seriesId","SeriesListPage","__WEBPACK_IMPORTED_MODULE_2_react_redux__","data","mixContainer","slice","dispatch","setMainMix","__WEBPACK_IMPORTED_MODULE_12__music_actions_player__","prepareMix","addToContainer","cb","__WEBPACK_IMPORTED_MODULE_13__music_actions_mix__","addGenresIfNotExists","__WEBPACK_IMPORTED_MODULE_3_react_router_dom__","__WEBPACK_IMPORTED_MODULE_10__music_hocs_QuickPlayHoc__","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_6__music_hocs_series_ListHoc__","WrappedComponent","class_1"],"mappings":"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","file":"static/js/1.d42a2f5a.chunk.js","sourcesContent":["import * as React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport SidebarComponent from '../../layouts/Sidebar';\nimport { Segment, Card, Image, Icon, Header } from 'semantic-ui-react';\nimport SeriesListHoc from '@music/hocs/series/ListHoc';\nimport { IState, ISeries, IRouteProps, IMix, MainMixType } from '../../interfaces';\nimport config from '@music/config';\nimport { seriesModel, artistModel } from '@music/models';\nimport { moveIdToDoc, get } from '@music/utils';\nimport QuickPlayHoc, { IQuickPlayHoc } from '@music/hocs/QuickPlayHoc';\nimport { findOne } from '../../filters';\nimport { setMainMix } from '@music/actions/player';\nimport { prepareMix, addGenresIfNotExists } from '@music/actions/mix';\nimport { SizeMe } from 'react-sizeme';\nimport gaService from '@music/_services/gaService';\n\ninterface ISeriesListProps extends IRouteProps, IQuickPlayHoc {\n  series: ISeries[];\n  container: IMix[];\n}\n\nclass SeriesList extends React.Component<ISeriesListProps, any> {\n\n  constructor(props: ISeriesListProps) {\n    super(props);\n    this.state = {};\n  }\n\n  public componentDidMount() {\n    artistModel.all()\n      .then(res => this.setState((state: any) => {\n        const artists = res.docs.map(moveIdToDoc).reduce((result: any, artist: any) => {\n          result[artist.id] = artist;\n          return result;\n        }, {})\n        return {...state, artists};\n      }, () => gaService.pageView(`Series List`)))\n      .catch(console.error);\n  }\n\n  public render() {\n    const { artists } = this.state;\n    return !artists ? null : (\n      <>\n      <SizeMe>\n        {({ size }) => (\n        <SidebarComponent>\n          <Segment style={{height: 'auto'}} className=\"toptracks-container\">\n            <Header as='h1'>Series</Header>\n            <Card.Group>\n            {this.props.series.map(s => (\n              <Card fluid={!((size.width || 0) > 603)} centered={!((size.width || 0) > 603)} key={s.id} link>\n                <Image onClick={this.go(s)} src={config(`images.${s.slug}.300x300`)} />\n                <Card.Content onClick={this.go(s)}>\n                  <Card.Header>{s.name}</Card.Header>\n                  <Card.Meta>\n                    by <strong className='date'>{get(`${s.artistId}.name`, artists)}</strong>\n                  </Card.Meta>\n                  <Card.Description>{s.about}</Card.Description>\n                </Card.Content>\n                <Card.Content extra onClick={this.play(s, s.count)}>\n                  <Icon name='play' />\n                  Listen the {' '}\n                  <strong>\n                    {s.name} #{s.count}\n                  </strong>\n                </Card.Content>\n              </Card>\n            ))}\n            </Card.Group>\n          </Segment>\n        </SidebarComponent>\n        )}\n        </SizeMe>\n      </>\n    );\n  }\n\n  private go(series: ISeries): () => any {\n    return () => {\n      this.props.history.push(seriesModel.newInstance(series).url());\n    }\n  }\n\n  private play(s: ISeries, count: number) {\n    return () => {\n      const { id } = s;\n      const mix = findOne(this.props.container, {seriesId: id, count});\n\n      if (mix) {\n        this.props.play(mix as IMix);\n      }\n    }\n  };\n}\n\nconst mapDispatchToProps = (dispatch: CallableFunction) => {\n  return {\n    setMainMix: (mix: MainMixType) => dispatch(setMainMix({...mix})),\n    prepareMix: (mix: IMix, addToContainer: boolean, cb: (mix: IMix) => any) => dispatch(prepareMix(mix, addToContainer, cb)),\n    addGenresIfNotExists: (mix: IMix,) => dispatch(addGenresIfNotExists(mix))\n  }\n};\n\nconst mapStateToProps = (state: IState) => {\n  return {\n    series: state.series.data,\n    container: [...state.mixContainer.data]\n  }\n};\n\nconst SeriesListPage = connect(mapStateToProps, mapDispatchToProps)(withRouter(QuickPlayHoc(SeriesList) as any));\n\nexport default SeriesListHoc(SeriesListPage);\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/series/ListPage.tsx","import * as React from 'react';\n\nexport default function SeriesListHoc(WrappedComponent: any) {\n  return class extends React.Component<any, any> {\n    constructor(props: any) {\n      super(props);\n      this.state = {};\n    }\n\n    public async componentDidMount() {\n\n    }\n\n    public render() {\n      return (\n        <WrappedComponent />\n      );\n    }\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/hocs/series/ListHoc.tsx"],"sourceRoot":""}