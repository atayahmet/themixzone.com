webpackJsonp([0],{1186:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=n(0),o=(n.n(i),n(65)),s=n(26),a=n(64),c=n(1195),u=(n.n(c),n(24)),l=n(125),p=n(539),h=n(1191),d=n(93),m=n(296),f=n(94),y=n(295),b=n(545),g=n(1199),v=n(546),w=n(96),E=n(1202),P=n(297),x=function(e){function t(t){var n=e.call(this,t)||this;return n.state={currentSeries:null,mix:{},isTimerAvailable:!1},n.seekHandler=function(e,t){var n=w.a.element().duration;w.a.element().currentTime=n/100*t},n}return r.c(t,e),Object.defineProperty(t.prototype,"container",{get:function(){return new d.a(this.props.container)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mix",{get:function(){return this.state.mix},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"current",{get:function(){return this.props.currentTrack||{}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trackName",{get:function(){return Object(u.d)("track.name",this.current,"-")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orderNumber",{get:function(){return Object(u.d)("orderNumber",this.current)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageUrl",{get:function(){return Object(u.d)("track.source.imageUrl",this.current,"")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCurrentMix",{get:function(){return!!this.mix&&Object(u.d)("mix.id",this.props.player)===this.mix.id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPlaying",{get:function(){return this.props.player.playing},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"part",{get:function(){var e=new URLSearchParams(this.props.location.search);return e.has("part")?{part:parseInt(e.get("part")||"0")}:{}},enumerable:!0,configurable:!0}),t.prototype.componentWillMount=function(){this.props.setMainMix(r.a({},this.props.player,{visible:!1}))},t.prototype.componentWillUnmount=function(){this.setState({isTimerAvailable:!1}),this.props.setMainMix(r.a({},this.props.player,{visible:!0}))},t.prototype.componentDidMount=function(){var e=this.props.match.params,t=e.slug,n=e.count,i=this.props.series.find(t,"slug"),o=r.a({seriesId:i.id,count:parseInt(n)},this.part),s=this.container.where(r.a({},o)).first();console.log("this.props.player",this.props),this.setState({currentSeries:i,mix:s,isTimerAvailable:this.props.player.playing},function(){return y.a.pageView("Mix Detail: "+i.name+" #"+n)})},t.prototype.componentDidUpdate=function(e){var t=this,n={},i=this.props.match.params.count,o=this.state.currentSeries||{},s=r.a({seriesId:o.id,count:parseInt(i)},this.part),a=this.container.where(s).first();a&&!Object(u.g)("cues.0.track",this.state.mix)&&this.props.prepareMix(r.a({},a),!0,function(e){t.setState({mix:e})}),this.props.player.playing!==e.player.playing&&(n=r.a({},n,{isTimerAvailable:this.props.player.playing})),Object.keys(n).length>0&&this.setState(r.a({},n))},t.prototype.render=function(){var e=this;return this.state.currentSeries?i.createElement("div",{id:"mix-detail-container"},i.createElement(p.a,null,!!this.mix&&this.mix.count&&i.createElement(s.q,{style:{backgroundImage:"url("+(this.mix.cover||"/pictures/cover-bg.jpeg")+")",height:Object(u.h)()?"100vh":"500px"},className:"wide-cover shake-bg"},i.createElement(i.Fragment,null,i.createElement(s.q,{basic:!0},i.createElement(s.h,{className:"header head-text-bg",as:"h1"},this.state.currentSeries.name," #",this.mix.count),Boolean(this.mix.description)&&i.createElement(i.Fragment,null,i.createElement("div",{style:{width:1,height:13}}),i.createElement(s.h,{className:"head-text-bg",as:"h3"},this.mix.description)),i.createElement("div",{className:"genre-list"},i.createElement(b.a,{genres:this.props.genres,mixGenres:this.mix.genres||[],labelProps:{basic:!1,size:"medium"}})),i.createElement("div",{className:"play-button"},i.createElement(E.a,r.a({},this.props,{mix:r.a({},this.mix,{series:this.props.series.first()}),service:P.a.get("mainPlayer")}))),this.trackName.length>1&&this.isCurrentMix&&i.createElement(s.e,{style:{marginTop:"10px",marginLeft:0}},i.createElement(s.e.Row,{columns:"1"},i.createElement(s.f,{mobile:"16",widescreen:"8",largeScreen:"8",tablet:"10"},i.createElement(s.h,{className:"black-bg",as:"h4"},this.orderNumber,". ",this.trackName))),i.createElement(s.e.Row,{columns:"1",style:{paddingTop:0}},i.createElement(s.f,{mobile:"3",widescreen:"1",largeScreen:"1",tablet:"2"},i.createElement(s.j,{src:this.imageUrl,style:{border:"solid 1px #4c4c4c",width:"90%"}}))))),this.isCurrentMix&&i.createElement(v.a,{playerService:P.a.get("mainPlayer"),start:this.state.isTimerAvailable,render:function(t,n){return i.createElement("div",{style:{height:"auto",width:"100%",position:"absolute",bottom:0,right:0}},i.createElement(g.a,{unit:"percent",onChange:e.seekHandler,percent:Math.ceil(t/n*100)}),i.createElement("div",{className:"time",style:{left:0}},Object(u.r)(t)),i.createElement("div",{className:"time",style:{right:0}},Object(u.r)(n)))}}))),i.createElement(s.c,null,!!this.mix&&this.mix.cues&&i.createElement(m.a,{cues:this.mix.cues,isPlaying:this.props.player.playing,currentTrack:this.props.currentTrack})),!!this.state.mix&&i.createElement("div",{style:{margin:"20px",height:100}},i.createElement(c.DiscussionEmbed,{shortname:"themixzonecom",config:{url:location.href,identifier:this.state.mix.id,title:this.state.currentSeries.name+" #"+this.state.mix.count}})))):null},t}(i.Component),C=Object(a.f)(Object(o.b)(function(e){return{player:e.player,container:e.mixContainer.data.slice(),series:new d.a(e.series.data),genres:e.genres.data.slice(),currentTrack:Object.keys(e.currentTrack).length>0?r.a({},e.currentTrack):void 0}},function(e){return{setMainMix:function(t){return e(Object(f.d)(r.a({},t)))},prepareMix:function(t,n,r){return e(Object(l.b)(t,n,r))}}})(Object(h.a)(x)));t.default=C},1191:function(e,t,n){"use strict";t.a=function(e){return function(t){function n(e){var n=t.call(this,e)||this;return n.state={},n}return r.c(n,t),n.prototype.render=function(){return i.createElement(e,r.a({},this.props,this.state))},n}(i.Component)};var r=n(5),i=n(0);n.n(i)},1192:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.insertScript=function(e,t,n){var r=window.document.createElement("script");return r.async=!0,r.src=e,r.id=t,n.appendChild(r),r},t.removeScript=function(e,t){var n=window.document.getElementById(e);n&&t.removeChild(n)},t.debounce=function(e,t,n){var r=void 0;return function(){var i=this,o=arguments,s=n&&!r;window.clearTimeout(r),r=setTimeout(function(){r=null,n||e.apply(i,o)},t),s&&e.apply(i,o)}}},1195:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiscussionEmbed=t.CommentEmbed=t.CommentCount=void 0;var r=n(1196),i=n(1197),o=n(1198);t.CommentCount=r.CommentCount,t.CommentEmbed=i.CommentEmbed,t.DiscussionEmbed=o.DiscussionEmbed;var s={CommentCount:r.CommentCount,CommentEmbed:i.CommentEmbed,DiscussionEmbed:o.DiscussionEmbed};t.default=s},1196:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommentCount=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),o=n(1192);var s=(0,o.debounce)(function(){window.DISQUSWIDGETS&&window.DISQUSWIDGETS.getCount({reset:!0})},300,!1);t.CommentCount=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"componentDidMount",value:function(){this.loadInstance()}},{key:"shouldComponentUpdate",value:function(e){if(this.props.shortname!==e.shortname)return!0;var t=e.config,n=this.props.config;return t.url!==n.url||t.identifier!==n.identifier}},{key:"componentWillUpdate",value:function(e){this.props.shortname!==e.shortname&&this.cleanInstance()}},{key:"componentDidUpdate",value:function(){this.loadInstance()}},{key:"loadInstance",value:function(){var e=window.document;e.getElementById("dsq-count-scr")?s():(0,o.insertScript)("https://"+this.props.shortname+".disqus.com/count.js","dsq-count-scr",e.body)}},{key:"cleanInstance",value:function(){var e=window.document.body;(0,o.removeScript)("dsq-count-scr",e),window.DISQUSWIDGETS=void 0}},{key:"render",value:function(){return i.default.createElement("span",{className:"disqus-comment-count","data-disqus-identifier":this.props.config.identifier,"data-disqus-url":this.props.config.url},this.props.children)}}]),t}()},1197:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommentEmbed=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(0));(t.CommentEmbed=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"getSrc",value:function(){return"https://embed.disqus.com/p/"+Number(this.props.commentId).toString(36)+"?p="+(this.props.showParentComment?"1":"0")+"&m="+(this.props.showMedia?"1":"0")}},{key:"render",value:function(){return i.default.createElement("iframe",{src:this.getSrc(),width:this.props.width,height:this.props.height,seamless:"seamless",scrolling:"no",frameBorder:"0"})}}]),t}()).defaultProps={showMedia:!0,showParentComment:!0,width:420,height:320}},1198:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiscussionEmbed=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),o=n(1192);t.DiscussionEmbed=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),r(t,[{key:"componentWillMount",value:function(){"undefined"!==typeof window&&window.disqus_shortname&&window.disqus_shortname!==this.props.shortname&&this.cleanInstance()}},{key:"componentDidMount",value:function(){this.loadInstance()}},{key:"shouldComponentUpdate",value:function(e){if(this.props.shortname!==e.shortname)return!0;var t=e.config,n=this.props.config;return t.url!==n.url||t.identifier!==n.identifier}},{key:"componentWillUpdate",value:function(e){this.props.shortname!==e.shortname&&this.cleanInstance()}},{key:"componentDidUpdate",value:function(){this.loadInstance()}},{key:"loadInstance",value:function(){var e=window.document;window&&window.DISQUS&&e.getElementById("dsq-embed-scr")?window.DISQUS.reset({reload:!0,config:this.getDisqusConfig(this.props.config)}):(window.disqus_config=this.getDisqusConfig(this.props.config),window.disqus_shortname=this.props.shortname,(0,o.insertScript)("https://"+this.props.shortname+".disqus.com/embed.js","dsq-embed-scr",e.body))}},{key:"cleanInstance",value:function(){var e=window.document;(0,o.removeScript)("dsq-embed-scr",e.body),window&&window.DISQUS&&window.DISQUS.reset({});try{delete window.DISQUS}catch(e){window.DISQUS=void 0}var t=e.getElementById("disqus_thread");if(t)for(;t.hasChildNodes();)t.removeChild(t.firstChild)}},{key:"getDisqusConfig",value:function(e){return function(){this.page.identifier=e.identifier,this.page.url=e.url,this.page.title=e.title,this.callbacks.onNewComment=[e.onNewComment]}}},{key:"render",value:function(){return i.default.createElement("div",{id:"disqus_thread"})}}]),t}()},1199:function(e,t,n){"use strict";var r=n(5),i=n(0),o=(n.n(i),n(1200)),s=n(1201),a=function(e){function t(t){var n=e.call(this,t)||this;return n.state={percent:0,lastRefresh:1},n.currentPipeCount=0,n.PIPE_WIDTH=3,n.PIPE_HOVER_SPACE=2,n.makePipe=function(e,t){n.ctx.clearRect(0,0,e.width,e.height);var r=n.updatePipes(t);n.draw(r)},n.clickHandler=function(e){var t=Math.floor(e.layerX/3);n.currentPipeCount=t,n.onChange(e,t/n.pipes.length*100),n.makePipe(n.canvas,e)},n}return r.c(t,e),Object.defineProperty(t.prototype,"width",{get:function(){return this.el&&this.el.offsetWidth||0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onChange",{get:function(){return this.props.onChange||function(e,t){return null}},enumerable:!0,configurable:!0}),t.prototype.componentWillUnmount=function(){window.onresize=null,this.canvas.onmouseout=null,this.canvas.onmousemove=null,this.canvas.removeEventListener("click",this.clickHandler)},t.prototype.componentDidMount=function(){return r.b(this,void 0,void 0,function(){var e=this;return r.d(this,function(t){try{this.canvas=document.getElementById("visualizer"),this.ctx=this.canvas.getContext("2d"),this.pipes=this.pipeAllocation(),this.canvas.addEventListener("click",this.clickHandler),this.canvas.onmouseout=function(t){return e.makePipe(e.canvas,r.a({},t,{layerX:0,layerY:0}))},this.canvas.onmousemove=this.makePipe.bind(this,this.canvas),window.onresize=this.makePipe.bind(this,this.canvas),this.setState(r.a({},this.props),function(){return e.draw(e.updatePipes())})}catch(e){console.error(e)}return[2]})})},t.prototype.componentDidUpdate=function(e){return r.b(this,void 0,void 0,function(){var t,n,i=this;return r.d(this,function(o){return t=this.props.percent||0,n=this.state.lastRefresh||0,console.log("componentDidUpdate",e,this.props.percent),(t<n||t-n>.3)&&(this.currentPipeCount=this.pipes.length/100*(this.props.percent||0),this.setState(r.a({},this.props,{lastRefresh:this.props.percent}),function(){return i.makePipe(i.canvas)})),[2]})})},t.prototype.draw=function(e){var t=new o.a;t.setContext(this.ctx),e.map(function(e,n){t.setX(e.x),t.setY(e.y),t.setWidth(e.width),t.setHeight(e.height),t.setFillStyle(e.color),t.draw()})},t.prototype.render=function(){var e=this;return i.createElement(i.Fragment,null,i.createElement("div",{className:"FakeVisualizer",ref:function(t){return e.el=t}},i.createElement("canvas",{id:"visualizer",height:"100",width:this.width})))},t.prototype.isIntersect=function(e,t,n,r,i,o){return n>e&&n<e+this.PIPE_WIDTH&&r>t&&r<t+o},t.prototype.isPassed=function(e,t,n,r){return e>=t||n>=r},t.prototype.updatePipes=function(e){var t=this,n=this.PIPE_WIDTH,i=this.PIPE_WIDTH,o=e||{},s=this.PIPE_HOVER_SPACE;return this.pipes.map(function(a,c){var u=100-a.height,l=a.height,p=o.layerX||0,h=o.layerY||0,d=t.isPassed(p,n,t.currentPipeCount,c+1)?"#20cce3":a.color;return e&&t.isIntersect(n,u,p,h,i,l)&&(u-=s,l+=s),n+=i,r.a({},a,{height:l,color:d,y:u})})},t.prototype.pipeAllocation=function(){var e=this,t=0,n=this.PIPE_WIDTH+1.5,r=Math.floor(this.width/n);return Array(Math.floor(r+r/(n/2.25))).fill(1).map(function(){var n=55+Math.ceil(25*Math.random()),r=Object(s.a)(e.ctx),i=100-n;return{x:t+=e.PIPE_WIDTH,y:i,width:2.5,height:n,color:r}})},t}(i.Component);t.a=a},1200:function(e,t,n){"use strict";var r=function(){function e(){}return e.prototype.setX=function(e){this.x=e},e.prototype.setY=function(e){this.y=e},e.prototype.setWidth=function(e){this.width=e},e.prototype.setHeight=function(e){this.height=e},e.prototype.setFillStyle=function(e){this.fillStyle=e},e.prototype.setContext=function(e){this.ctx=e},e.prototype.draw=function(){this.ctx.beginPath(),this.ctx.fillStyle=this.fillStyle,this.ctx.fillRect(this.x,this.y,this.width,this.height),this.ctx.stroke(),console.log("gg",this.ctx.isPointInPath(this.x,this.y))},e}();t.a=r},1201:function(e,t,n){"use strict";t.a=function(e){var t=e.createLinearGradient(0,0,0,80);return t.addColorStop(0,"#5df5ff"),t.addColorStop(.5,"#34edf9"),t.addColorStop(1,"#08e6f5"),t}},1202:function(e,t,n){"use strict";var r=n(0),i=(n.n(r),n(26)),o=n(127);t.a=Object(o.a)(function(e){var t=e.action,n=e.isPlaying,o=e.isLoading;return e.mix,r.createElement(r.Fragment,null,r.createElement(i.a,{circular:!0,size:"huge",className:"dark-gray",onClick:function(){return t()},loading:!n&&o,icon:n?"pause":"play",style:{border:n?"solid 1px #0d8b9c":"solid 1px #4e4e4e"}}))})}});
//# sourceMappingURL=0.642662e0.chunk.js.map